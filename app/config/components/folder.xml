<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <!-- directors -->

        <service id="consigna.director.folder" class="Component\Core\Services\ObjectDirector">
            <argument type="service" id="doctrine.orm.default_entity_manager"/>
            <argument type="service" id="consigna.repository.folder"/>
            <argument type="service" id="consigna.factory.folder"/>
        </service>
        
        <!-- event dispatcher -->

        <service id="consigna.event_dispatcher.folder" class="Component\Folder\EventDispatcher\FolderEventDispatcher">
            <argument type="service" id="event_dispatcher"/>
        </service>

        <!-- factories -->
        <service id="consigna.factory.folder" class="Component\Folder\Factory\FolderFactory">
            <argument type="service">
                <service class="Component\Core\Factory\Factory">
                    <argument>Component\Folder\Model\Folder</argument>
                </service>
            </argument>
        </service>

        <!-- forms -->

        <service id="consigna.type.folder_access" class="Component\Folder\Form\Type\FolderAccessType">
            <argument type="service" id="security.encoder_factory"/>
            <tag name="form.type"/>
        </service>

        <service id="consigna.type.folder_anon_access" class="Component\Folder\Form\Type\FolderAnonAccessType">
            <argument type="service" id="security.encoder_factory"/>
            <tag name="form.type"/>
        </service>

        <service id="consigna.type.folder_create" class="Component\Folder\Form\Type\FolderCreateType">
            <tag name="form.type"/>
        </service>
        
        <service id="consigna.type.folder_edit" class="Component\Folder\Form\Type\FolderEditType">
            <tag name="form.type"/>
        </service>

        <!-- repositories -->

        <service id="consigna.repository.folder" class="Component\Folder\Repository\FolderRepository">
            <factory service="doctrine.orm.default_entity_manager" method="getRepository"/>
            <argument>Component\Folder\Model\Folder</argument>
        </service>

        <!-- services -->

        <service id="consigna.manager.folder" class="Component\Folder\Services\FolderManager">
            <argument type="service" id="consigna.director.folder"/>
            <argument type="service" id="consigna.event_dispatcher.folder"/>
        </service>
    </services>
</container>